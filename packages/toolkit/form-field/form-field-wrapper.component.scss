/// ============================================================================
/// THEMING ARCHITECTURE
/// ============================================================================
/// Uses Lea Verou's "pseudo-private variables" pattern for fallback management:
/// https://lea.verou.me/blog/2021/10/custom-properties-with-defaults/
///
/// Layering approach:
/// 1. Design tokens (internal, --_field-*) - Base values for colors, spacing, typography
/// 2. Public API (--ngx-form-field-*) - Overridable by consumers
/// 3. Pseudo-private (--_*) - Resolve public → fallback to tokens
/// 4. Implementation - Uses only --_* variables (single source of truth)
///
/// This pattern:
/// - Avoids repeating fallbacks throughout the codebase
/// - Creates a clean API without exposing internal token names
/// - Allows consumers to override specific values while preserving defaults
///
/// Design token reference values (light mode):
/// - Border: rgba(50, 65, 85, 0.25), hover: #324155
/// - Focus: #007bc7 with 4px spread
/// - Error: #db1818
/// - Text primary: #324155, secondary: rgba(50, 65, 85, 0.75)
/// - Spacing: 2px (gap), 4px (padding-y), 8px (padding-x)
/// - Radius: 4px

/// ============================================================================
/// PREFIX/SUFFIX ARCHITECTURE
/// ============================================================================
/// Modern CSS pattern using :has(), :empty, and :focus-within selectors:
/// - :has([prefix]) - Detects prefix slot content and adds left padding to input
/// - :has([suffix]) - Detects suffix slot content and adds right padding to input
/// - :empty - Automatically hides empty prefix/suffix slots (no JavaScript needed)
/// - :focus-within - Container-based focus styling eliminates double focus rings
/// - Flexbox layout - Ensures proper alignment and spacing
/// - Interactive suffix support - Buttons in suffix inherit container focus state
///
/// Browser Support: Chrome 105+, Firefox 121+, Safari 15.4+, Edge 105+ (95%+ coverage)
/// ============================================================================

// ============================================================================
// LAYER 1: DESIGN TOKENS (Internal foundation)
// ============================================================================
// Base values that define the visual language. Not exposed publicly.
// Use semantic names without framework-specific terminology.

:host {
  // Color tokens
  --_field-clr-primary: #007bc7; // Focus/interactive states
  --_field-clr-danger: #db1818; // Error/invalid states
  --_field-clr-warning: #f59e0b; // Warning states (amber)
  --_field-clr-text: #324155; // Primary text color
  --_field-clr-text-secondary: rgba(
    50,
    65,
    85,
    0.75
  ); // Labels, hints, placeholders
  --_field-clr-surface: #ffffff; // Input background
  --_field-clr-border: rgba(50, 65, 85, 0.25); // Default border
  --_field-clr-border-hover: #324155; // Hover border
  --_field-clr-disabled: #f3f4f6; // Disabled background

  // Spacing scale (rem for accessibility)
  --_field-space-3xs: 0.125rem; // 2px - tight gaps
  --_field-space-2xs: 0.25rem; // 4px - padding vertical
  --_field-space-xs: 0.5rem; // 8px - padding horizontal
  --_field-space-sm: 0.75rem; // 12px - medium gaps
  --_field-space-md: 0.5rem; // 8px - standard gaps
  --_field-space-lg: 0.75rem; // 12px - larger gaps
  --_field-space-xl: 1rem; // 16px - section spacing

  // Typography scale
  --_field-text-caption: 0.75rem; // 12px - labels, hints (caption style)
  --_field-text-body: 0.875rem; // 14px - input text (body style)
  --_field-text-base: 1rem; // 16px - fallback

  // Line-height scale
  --_field-line-height-caption: 1rem; // 16px - for caption text
  --_field-line-height-body: 1.25rem; // 20px - for body text

  // Font-weight scale
  --_field-weight-normal: 400; // Regular text
  --_field-weight-medium: 500; // Emphasized labels (standard layout)
  --_field-weight-semibold: 600; // Required marker, strong emphasis

  // Other tokens
  --_field-radius: 0.25rem; // 4px - border radius
  --_field-opacity-disabled: 0.6;
  --_field-focus-spread: 4px; // Focus ring spread

  // Icon/touch targets
  --_field-icon-size: 1.25rem; // 20px
  --_field-touch-target: 2rem; // 32px

  // Legacy aliases (for backward compatibility)
  --_field-text-xs: var(--_field-text-caption);
  --_field-text-sm: var(--_field-text-body);
  --_field-line-height-s: var(--_field-line-height-caption);
  --_field-line-height-m: var(--_field-line-height-body);
  --_field-clr-text-muted: var(--_field-clr-text-secondary);
  --_field-clr-text-subtle: var(--_field-clr-text-secondary);
}

// Dark mode overrides (respects system preference)
@media (prefers-color-scheme: dark) {
  :host {
    --_field-clr-primary: #60a5fa; // Lighter blue for dark bg
    --_field-clr-danger: #fca5a5; // Lighter red for dark bg
    --_field-clr-warning: #fcd34d; // Lighter amber for dark bg
    --_field-clr-text: #f9fafb; // Almost white - main text
    --_field-clr-text-secondary: rgba(
      249,
      250,
      251,
      0.75
    ); // Light text/secondary
    --_field-clr-surface: #1f2937; // Dark gray - backgrounds
    --_field-clr-border: rgba(249, 250, 251, 0.25); // Light border
    --_field-clr-border-hover: #f9fafb;
    --_field-clr-disabled: #111827;
  }
}

// Light mode override (when app explicitly sets light theme)
:root:not(.dark) :host {
  --_field-clr-primary: #007bc7;
  --_field-clr-danger: #db1818;
  --_field-clr-warning: #f59e0b;
  --_field-clr-text: #324155;
  --_field-clr-text-secondary: rgba(50, 65, 85, 0.75);
  --_field-clr-surface: #ffffff;
  --_field-clr-border: rgba(50, 65, 85, 0.25);
  --_field-clr-border-hover: #324155;
  --_field-clr-disabled: #f3f4f6;
}

// ============================================================================
// LAYER 2: PUBLIC API (Consumer-facing properties)
// ============================================================================
// These properties can be overridden by consumers.
// Pseudo-private variables (--_*) reference these with fallbacks to tokens.
// Pattern: --_var: var(--ngx-public-var, var(--_token));

:host {
  // Semantic color API
  --_color-primary: var(
    --ngx-form-field-color-primary,
    var(--_field-clr-primary)
  );
  --_color-error: var(--ngx-form-field-color-error, var(--_field-clr-danger));
  --_color-warning: var(
    --ngx-form-field-color-warning,
    var(--_field-clr-warning)
  );
  --_color-text: var(--ngx-form-field-color-text, var(--_field-clr-text));
  --_color-text-secondary: var(
    --ngx-form-field-color-text-secondary,
    var(--_field-clr-text-secondary)
  );
  --_color-surface: var(
    --ngx-form-field-color-surface,
    var(--_field-clr-surface)
  );
  --_color-border: var(--ngx-form-field-color-border, var(--_field-clr-border));
  --_color-border-hover: var(
    --ngx-form-field-color-border-hover,
    var(--_field-clr-border-hover)
  );
  --_color-disabled: var(
    --ngx-form-field-color-disabled,
    var(--_field-clr-disabled)
  );

  // Spacing API
  --_padding-vertical: var(
    --ngx-form-field-padding-vertical,
    var(--_field-space-2xs)
  );
  --_padding-horizontal: var(
    --ngx-form-field-padding-horizontal,
    var(--_field-space-xs)
  );

  // Legacy alias for backward compatibility
  --_color-text-muted: var(--_color-text-secondary);
}

// ============================================================================
// LAYER 3: COMPONENT PROPERTIES (Specific use cases)
// ============================================================================
// Purpose-specific properties for fine-grained control.
// Uses pseudo-private pattern: public API → fallback to tokens.

:host {
  // Layout
  --_gap: var(--ngx-form-field-gap, var(--_field-space-3xs));
  --_margin-bottom: var(--ngx-form-field-margin, 0);

  // Prefix/Suffix
  --_prefix-gap: var(--ngx-form-field-prefix-gap, var(--_field-space-md));
  --_suffix-gap: var(--ngx-form-field-suffix-gap, var(--_field-space-md));
  --_prefix-color: var(
    --ngx-form-field-prefix-color,
    var(--_color-text-secondary)
  );
  --_suffix-color: var(
    --ngx-form-field-suffix-color,
    var(--_color-text-secondary)
  );

  // Label - Standard layout (caption style, above input)
  --_label-size: var(--ngx-form-field-label-size, var(--_field-text-caption));
  --_label-weight: var(
    --ngx-form-field-label-weight,
    var(--_field-weight-normal)
  );
  --_label-color: var(
    --ngx-form-field-label-color,
    var(--_color-text-secondary)
  );
  --_label-line-height: var(
    --ngx-form-field-label-line-height,
    var(--_field-line-height-caption)
  );
  --_label-padding-start: var(
    --ngx-form-field-label-padding-start,
    var(--_field-space-3xs)
  );

  // Label - Outlined layout (caption style, inside container)
  --_label-outline-size: var(
    --ngx-form-field-outline-label-size,
    var(--_field-text-caption)
  );
  --_label-outline-gap: var(--ngx-form-field-outline-label-gap, 0rem);
  --_label-outline-weight: var(
    --ngx-form-field-outline-label-weight,
    var(--_field-weight-normal)
  );
  --_label-outline-color: var(
    --ngx-form-field-outline-label-color,
    var(--_color-text-secondary)
  );
  --_label-outline-line-height: var(
    --ngx-form-field-outline-label-line-height,
    var(--_field-line-height-caption)
  );

  // Required marker
  --_required-marker-color: var(
    --ngx-form-field-required-marker-color,
    var(--_color-error)
  );
  --_required-marker-weight: var(
    --ngx-form-field-required-marker-weight,
    var(--_field-weight-semibold)
  );

  // Input - Standard layout
  --_input-size: var(--ngx-form-field-input-size, var(--_field-text-body));
  --_input-padding: var(
    --ngx-form-field-input-padding,
    var(--_padding-vertical) var(--_padding-horizontal)
  );
  --_input-color: var(--ngx-form-field-input-color, var(--_color-text));
  --_input-bg: var(--ngx-form-field-input-bg, var(--_color-surface));
  --_input-border-color: var(
    --ngx-form-field-border-color,
    var(--_color-border)
  );
  --_input-radius: var(--ngx-form-field-radius, var(--_field-radius));
  --_input-line-height: var(
    --ngx-form-field-input-line-height,
    var(--_field-line-height-body)
  );
  --_input-weight: var(
    --ngx-form-field-input-weight,
    var(--_field-weight-normal)
  );

  // Input - Outlined layout
  --_input-outline-size: var(
    --ngx-form-field-outline-input-size,
    var(--_field-text-body)
  );
  --_input-outline-weight: var(
    --ngx-form-field-outline-input-weight,
    var(--_field-weight-normal)
  );
  --_input-outline-color: var(
    --ngx-form-field-outline-input-color,
    var(--_color-text)
  );
  --_input-outline-line-height: var(
    --ngx-form-field-outline-input-line-height,
    var(--_field-line-height-body)
  );

  // States (Figma: focus/spread/m = 4px, interaction/primary/enabled = #007bc7)
  --_focus-color: var(--ngx-form-field-focus-color, var(--_color-primary));
  --_focus-box-shadow: var(
    --ngx-form-field-focus-box-shadow,
    0 0 0 var(--_field-focus-spread)
      color-mix(in srgb, var(--_focus-color) 25%, transparent)
  );
  --_hover-border-color: var(
    --ngx-form-field-hover-border-color,
    var(--_color-border-hover)
  );
  --_invalid-color: var(--ngx-form-field-invalid-color, var(--_color-error));
  --_warning-color: var(--ngx-form-field-warning-color, var(--_color-warning));
  --_warning-box-shadow: var(
    --ngx-form-field-warning-box-shadow,
    0 0 0 var(--_field-focus-spread)
      color-mix(in srgb, var(--_warning-color) 25%, transparent)
  );
  --_disabled-bg: var(--ngx-form-field-disabled-bg, var(--_color-disabled));
  --_disabled-opacity: var(
    --ngx-form-field-disabled-opacity,
    var(--_field-opacity-disabled)
  );

  // Placeholder
  --_placeholder-color: var(
    --ngx-form-field-placeholder-color,
    var(--_color-text-muted)
  );
}

// ============================================================================
// STANDARD LAYOUT
// ============================================================================
// Default vertical layout with label above input.

:host {
  display: flex;
  flex-direction: column;
  gap: var(--_gap);
  margin-bottom: var(--_margin-bottom);
  width: 100%;
  height: fit-content; // Prevent stretching in grid/flex rows
}

// Label sits OUTSIDE the bordered container (traditional layout)
.ngx-signal-form-field-wrapper__label {
  font-size: var(--_label-size);
  font-weight: var(--_label-weight);
  line-height: var(--_label-line-height);
  color: var(--_label-color);
  margin-bottom: 0;
  display: block;
  padding-inline-start: var(--_label-padding-start);
}

.ngx-signal-form-field-wrapper__content {
  display: flex;
  align-items: center;
  gap: 0; // No gap - prefix/suffix integrated into input
  width: 100%;
  position: relative;

  // Border and background on container (wraps prefix + input + suffix)
  border: 1px solid var(--_input-border-color);
  border-radius: var(--_input-radius);
  background-color: var(--_input-bg);
  padding: var(--_input-padding);
  transition:
    border-color 0.15s ease-in-out,
    box-shadow 0.15s ease-in-out;

  // Hover state (Figma: border/opaque/dark = #324155)
  &:hover:not(:focus-within) {
    border-color: var(--_hover-border-color);
  }

  // Focus state when any child input has focus
  &:focus-within {
    border-color: var(--_focus-color);
    box-shadow: var(--_focus-box-shadow);
    outline: none;
  }

  // Invalid state when input has aria-invalid
  &:has(input[aria-invalid='true']),
  &:has(textarea[aria-invalid='true']),
  &:has(select[aria-invalid='true']) {
    border-color: var(--_invalid-color);
  }

  // Disabled state
  &:has(input:disabled),
  &:has(textarea:disabled),
  &:has(select:disabled) {
    background-color: var(--_disabled-bg);
    opacity: var(--_disabled-opacity);
    cursor: not-allowed;
  }
}

// Warning state styling (applied via host class when field has warnings but no errors)
:host(.ngx-signal-form-field-wrapper--warning)
  .ngx-signal-form-field-wrapper__content {
  border-color: var(--_warning-color);

  &:focus-within {
    border-color: var(--_warning-color);
    box-shadow: var(--_warning-box-shadow);
  }
}

.ngx-signal-form-field-wrapper__main {
  display: flex;
  flex-direction: row; // Row since label is outside
  align-items: center;
  flex: 1;
  min-width: 0; // Prevent flex item overflow
}

.ngx-signal-form-field-wrapper__prefix,
.ngx-signal-form-field-wrapper__suffix {
  display: flex;
  align-items: center;
  flex-shrink: 0;
  color: var(--_prefix-color);
  font-size: var(--_field-text-sm);
  line-height: 1;
  user-select: none;

  // Hide empty slots
  &:empty {
    display: none;
  }
}

.ngx-signal-form-field-wrapper__prefix {
  padding-right: var(--_field-space-md);
}

.ngx-signal-form-field-wrapper__suffix {
  color: var(--_suffix-color);
  gap: var(--_suffix-gap);
  padding-left: var(--_field-space-md);
}

// Modern :has() based dynamic padding - adjust main content when prefix/suffix present
// NOTE: main content has no intrinsic horizontal padding, so we don't need
// conditional padding shims when prefix/suffix exist. Removing the blocks
// above reduces CSS without changing behavior.

// Prefix/suffix content styling
:host ::ng-deep [prefix],
:host ::ng-deep [suffix] {
  display: flex;
  align-items: center;
  user-select: none;
  font-size: 0.875rem; // 14px - clean, readable size
  // Remove baseline gaps so SVGs center precisely within flex container
  line-height: 0;
  opacity: 0.6; // More subtle, integrated look
  color: var(--_color-text-muted);
  transition:
    opacity 0.15s ease-in-out,
    color 0.15s ease-in-out;

  // Normalize nested SVGs to avoid inline baseline alignment issues
  svg {
    display: block;
    inline-size: var(--_field-icon-size);
    block-size: var(--_field-icon-size);
  }

  // Interactive elements (buttons, links)
  button,
  a {
    cursor: pointer;
    background: transparent;
    border: none;
    padding: var(--_field-space-xs);
    margin: calc(var(--_field-space-xs) * -1);
    color: var(--_color-text-muted);
    font-size: 1.125rem;
    line-height: 1;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--_field-radius);
    transition:
      opacity 0.15s ease-in-out,
      background-color 0.15s ease-in-out,
      transform 0.15s ease-in-out;
    opacity: 0.5;
    min-inline-size: var(--_field-touch-target);
    min-block-size: var(--_field-touch-target);

    &:hover {
      opacity: 0.8;
      background-color: color-mix(in srgb, var(--_color-text) 6%, transparent);
      transform: scale(1.05);
    }

    &:active {
      opacity: 1;
      background-color: color-mix(in srgb, var(--_color-text) 10%, transparent);
      transform: scale(0.98);
    }

    &:focus-visible {
      outline: 2px solid var(--_focus-color);
      outline-offset: 2px;
      opacity: 1;
    }
  }
}

// Input, textarea, select (inside main content wrapper)
// No label styling here - label is in its own class above
:host ::ng-deep .ngx-signal-form-field-wrapper__main input,
:host ::ng-deep .ngx-signal-form-field-wrapper__main textarea,
:host ::ng-deep .ngx-signal-form-field-wrapper__main select {
  font-size: var(--_input-size);
  color: var(--_input-color);
  padding: 0; // No padding - container handles it
  border: none; // No border - container handles it
  border-radius: 0;
  background-color: transparent; // Transparent - container has background
  box-shadow: none; // Ensure no inner shadow is visible inside the content wrapper
  transition:
    border-color 0.15s ease-in-out,
    box-shadow 0.15s ease-in-out;
  min-width: 0; // Prevent flex overflow
  width: 100%;

  &:focus {
    outline: none;
    // Focus styling handled by container :focus-within
  }

  &[aria-invalid='true'] {
    // Invalid styling handled by container :has()
  }

  &:disabled {
    // Disabled styling handled by container :has()
    cursor: not-allowed;
  }

  &::placeholder {
    color: var(--_placeholder-color);
  }
}

// ============================================================================
// OUTLINED LAYOUT
// ============================================================================
// Container-based input where label sits inside the border.
// Reuses the same semantic tokens, just applies them differently.
// Uses CSS Grid to visually position label INSIDE the bordered container
// while maintaining the existing DOM structure for content projection.

:host(.ngx-signal-forms-outline) {
  // CSS Grid layout to integrate label visually into the bordered container
  display: grid;
  grid-template-columns: 1fr;
  grid-template-rows: auto auto;
  grid-template-areas:
    'content'
    'assistive';
  gap: var(--_field-space-3xs); // 2px gap between container and assistive

  // Label wrapper positioned inside the content area (caption style)
  .ngx-signal-form-field-wrapper__label {
    grid-area: content;
    z-index: 1;
    display: flex;
    align-items: flex-start;
    pointer-events: none;
    padding: var(--_field-space-2xs) var(--_field-space-xs) 0;

    label {
      // Caption typography: smaller, lighter for inline labels
      font-size: var(--_label-outline-size);
      line-height: var(--_label-outline-line-height);
      font-weight: var(--_label-outline-weight);
      color: var(--_label-outline-color);
      cursor: text;
      pointer-events: auto;
    }
  }
}

:host(.ngx-signal-forms-outline) .ngx-signal-form-field-wrapper__content {
  grid-area: content;
  display: flex;
  flex-direction: row;
  align-items: flex-end;
  gap: 0;
  // Top padding = label line-height + gap (default 0) + base padding
  padding: calc(
      var(--_label-outline-line-height) + var(--_label-outline-gap) +
        var(--_padding-vertical)
    )
    var(--_padding-horizontal) var(--_padding-vertical);
  background-color: var(--_input-bg);
  border: 1px solid var(--_input-border-color);
  border-radius: var(--_input-radius);
  cursor: text;
  transition:
    border-color 0.15s ease-in-out,
    box-shadow 0.15s ease-in-out;
  min-height: var(--ngx-form-field-min-height, 3.5rem);
}

// Prefix/suffix in outlined forms - use :has() for conditional borders
// Prefix/suffix inherit the base flex centering; only normalize spacing here
// to avoid redundant declarations.
:host(.ngx-signal-forms-outline) .ngx-signal-form-field-wrapper__prefix,
:host(.ngx-signal-forms-outline) .ngx-signal-form-field-wrapper__suffix {
  padding: 0;
  margin: 0;
}

// Prefix spacing when present (no border divider)
:host(.ngx-signal-forms-outline)
  .ngx-signal-form-field-wrapper__content:has(
    .ngx-signal-form-field-wrapper__prefix:not(:empty)
  ) {
  .ngx-signal-form-field-wrapper__prefix {
    padding-right: var(--_field-space-sm);
  }
}

// Suffix spacing when present (no border divider)
:host(.ngx-signal-forms-outline)
  .ngx-signal-form-field-wrapper__content:has(
    .ngx-signal-form-field-wrapper__suffix:not(:empty)
  ) {
  .ngx-signal-form-field-wrapper__suffix {
    padding-left: var(--_field-space-sm);
  }
}

// Main content wrapper for outlined (vertical layout for label + input)
:host(.ngx-signal-forms-outline) .ngx-signal-form-field-wrapper__main {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-width: 0;
}

// Required marker (automatic via :has() selector)
// Detects required inputs in __main and adds marker to label in __label
:host(.ngx-signal-forms-outline[data-show-required='true'])
  .ngx-signal-form-field-wrapper__content:has([required])
  ~ .ngx-signal-form-field-wrapper__label
  label::after,
:host(.ngx-signal-forms-outline[data-show-required='true'])
  .ngx-signal-form-field-wrapper__content:has([aria-required='true'])
  ~ .ngx-signal-form-field-wrapper__label
  label::after {
  content: attr(data-required-marker);
  color: var(--_required-marker-color);
  font-weight: var(--_required-marker-weight);
}

// For grid layout where __label comes before __content in DOM,
// also target direct descendant
:host(.ngx-signal-forms-outline[data-show-required='true']):has(
    .ngx-signal-form-field-wrapper__content [required]
  )
  .ngx-signal-form-field-wrapper__label
  label::after,
:host(.ngx-signal-forms-outline[data-show-required='true']):has(
    .ngx-signal-form-field-wrapper__content [aria-required='true']
  )
  .ngx-signal-form-field-wrapper__label
  label::after {
  content: attr(data-required-marker);
  color: var(--_required-marker-color);
  font-weight: var(--_required-marker-weight);
}

// Remove input default styling (container provides all visual feedback)
:host(.ngx-signal-forms-outline)
  ::ng-deep
  .ngx-signal-form-field-wrapper__main
  input,
:host(.ngx-signal-forms-outline)
  ::ng-deep
  .ngx-signal-form-field-wrapper__main
  textarea,
:host(.ngx-signal-forms-outline)
  ::ng-deep
  .ngx-signal-form-field-wrapper__main
  select {
  border: none;
  background-color: transparent;
  padding: 0;
  margin: 0;
  width: 100%;
  font-size: var(--_input-outline-size);
  line-height: var(--_input-outline-line-height);
  font-weight: var(--_input-outline-weight);
  color: var(--_input-outline-color);
  outline: none;
  box-shadow: none;

  // Ensure no focus ring on the input itself
  &:focus {
    outline: none;
    box-shadow: none;
    border: none;
  }

  &:focus-visible {
    outline: none;
    box-shadow: none;
  }
}

// Placeholder (slightly more subtle in outlined)
:host(.ngx-signal-forms-outline)
  ::ng-deep
  .ngx-signal-form-field-wrapper__main
  input::placeholder,
:host(.ngx-signal-forms-outline)
  ::ng-deep
  .ngx-signal-form-field-wrapper__main
  textarea::placeholder {
  color: var(--_placeholder-color);
}

// States using :has()/focus-within are already defined in the base container
// above (to avoid duplicate CSS). They apply to outlined layout as well
// because the container element is the same.

// ============================================================================
// ERROR/WARNING ALIGNMENT
// ============================================================================
// Ensures error/warning messages align properly with form field inputs.
// Uses CSS custom properties to avoid ::ng-deep.

// Standard layout - 8px horizontal padding for breathing room
:host {
  // Use feedback layer variable if available, otherwise fallback to internal token
  --_feedback-padding-horizontal: var(
    --ngx-signal-form-feedback-padding-horizontal,
    var(--_field-space-md)
  );
  --ngx-signal-form-error-padding-horizontal: var(
    --_feedback-padding-horizontal
  );
}

// Outlined layout - maintains same 8px padding to align with input text
// Outlined containers have padding: 0.25rem 0.5rem (4px vertical, 8px horizontal).
// The 8px horizontal padding positions the input text/placeholder.out
// Errors inherit the same 8px padding to align perfectly with input text.
:host(.ngx-signal-forms-outline) {
  --ngx-signal-form-error-padding-horizontal: var(
    --_feedback-padding-horizontal
  );
}

// ============================================================================
// CHECKBOX/RADIO ADAPTATIONS
// ============================================================================

// Case 1: Input nested INSIDE Label (e.g. <label><input type="checkbox"> Text</label>)
// The label wraps the input, so it gets projected into the label slot via select="label".
// The content slot is effectively empty but still renders a border/height.
// SOLUTION: Hide the main content wrapper entirely when the label contains a check/radio.
:host:has(.ngx-signal-form-field-wrapper__label input[type='checkbox']),
:host:has(.ngx-signal-form-field-wrapper__label input[type='radio']) {
  .ngx-signal-form-field-wrapper__content {
    display: none;
  }
}

// Case 2: Input SEPARATE from Label (e.g. <label>Text</label> <input type="checkbox">)
// The input is projected into the content slot.
// SOLUTION: Remove text-field-like styling (border, background, padding) from the wrapper.
.ngx-signal-form-field-wrapper__content:has(input[type='checkbox']),
.ngx-signal-form-field-wrapper__content:has(input[type='radio']) {
  border: none;
  background-color: transparent;
  padding: 0;
  box-shadow: none;

  &:hover,
  &:focus-within {
    border-color: transparent;
    box-shadow: none;
  }
}

// Case 2 continuation: Reset input styles for checkbox/radio
// Text fields get width: 100% which distorts checkboxes.
:host ::ng-deep .ngx-signal-form-field-wrapper__main input[type='checkbox'],
:host ::ng-deep .ngx-signal-form-field-wrapper__main input[type='radio'] {
  width: auto; // Do not stretch
  margin-right: 0.5rem; // Small gap if needed
}
